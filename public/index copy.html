<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Prueba de Deploy ðŸš€</title>
<meta name="description" content="PÃ¡gina de prueba con login Google + Firebase Hosting + Custom Claims." />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸš€</text></svg>">
<style>
:root{
  --bg: #0b1020;
  --card: #111936;
  --fg: #e6e9f2;
  --muted:#9aa3b2;
  --primary:#6aa4ff;
  --success:#3ddc84;
  --accent:#ff7aa2;
  --radius: 16px;
}
*{box-sizing:border-box}
html,body{height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", sans-serif; color:var(--fg); background: radial-gradient(1200px 800px at 70% -20%, #1b2551 0%, var(--bg) 40%, #070b17 100%) fixed; display:flex; justify-content:center; align-items:center; transition: background 300ms;}
.wrap{width:min(920px,100%); display:grid; gap:16px; display:none;}
header, main, footer{background: color-mix(in oklab, var(--card), black 10%); border:1px solid color-mix(in oklab,var(--card),white 10%); border-radius:var(--radius); padding:clamp(16px,3vw,28px); box-shadow:0 10px 30px rgba(0,0,0,.25);}
.grid{display:grid; gap:16px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); align-items: stretch;}
.card{background: color-mix(in oklab,var(--card),black 5%); border:1px solid color-mix(in oklab,var(--card),white 8%); border-radius:calc(var(--radius)-4px); padding:16px; display:flex; flex-direction:column; gap:12px;}
.badge{display:inline-block; padding:6px 10px; border-radius:999px; font-size:12px; letter-spacing:.4px; background: color-mix(in oklab,var(--primary),white 10%); color:white;}
button{appearance:none; border:0; border-radius: 12px; padding:10px 14px; font-weight:600; cursor:pointer; background: var(--primary); color:white; transition: transform .06s ease, box-shadow .2s ease, opacity .2s ease; box-shadow:0 6px 18px rgba(106,164,255,.35);}
button:active{transform:translateY(1px) scale(.99)}
.btn-row{display:flex; gap:8px; flex-wrap:wrap}
code,kbd{background:#0e142a;border:1px solid #202a4f;border-radius:8px;padding:2px 6px;color:#b8c4ff}
footer{color:var(--muted); font-size:14px; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap}
.ok{color:var(--success); font-weight:700}
.accent{color:var(--accent); font-weight:700}
.mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
.pill{background:#0f172a; color:#cbd5e1; border:1px dashed #334155; padding:10px 12px; border-radius:12px; font-size:13px}
.login-container{display:flex; flex-direction:column; gap:12px; text-align:center;}
</style>
</head>
<body>

<!-- Login Google -->
<div class="login-container" id="loginScreen">
  <h2>Inicia sesiÃ³n para continuar</h2>
  <button id="googleLoginBtn">Iniciar sesiÃ³n con Google</button>
</div>

<!-- Contenido principal -->
<div class="wrap" id="mainContent">
  <header>
    <h1>ðŸš€ Deploy OK â€” PÃ¡gina de prueba</h1>
    <p>Si ves esto en <span class="mono" id="host">localhost</span>, tu hosting funciona. Probado para <span class="ok">Firebase Hosting</span>.</p>
  </header>

  <main class="grid" role="main">
    <section class="card" aria-labelledby="estado">
      <div class="badge">Estado en vivo</div>
      <h2 id="estado" style="margin:0">DiagnÃ³stico rÃ¡pido</h2>
      <ul>
        <li>Dominio: <span class="mono" id="domain">â€”</span></li>
        <li>Protocolo: <span class="mono" id="protocol">â€”</span></li>
        <li>Fecha/Hora: <span class="mono" id="clock">â€”</span></li>
      </ul>
      <div class="pill">Accede con Google para ver todo el contenido.</div>
    </section>

    <section class="card" aria-labelledby="interacciones">
      <div class="badge">Interacciones</div>
      <h2 id="interacciones" style="margin:0">Botones y estado</h2>
      <div class="btn-row">
        <button id="toggleTheme">Alternar modo oscuro</button>
        <button id="countBtn">Contador: <span id="count">0</span></button>
        <button id="reset">Reiniciar</button>
        <button id="logoutBtn">Cerrar sesiÃ³n</button>
      </div>
    </section>

    <section class="card" id="adminSection" style="display:none;">
      <div class="badge">SecciÃ³n Admin</div>
      <p>Solo visible para administradores</p>
    </section>

    <section class="card" aria-labelledby="contenido">
      <div class="badge">Contenido</div>
      <h2 id="contenido" style="margin:0">SecciÃ³n de ejemplo</h2>
      <p>Este es un contenido de prueba. Edita este archivo y sube tus cambios para validar el flujo de deploy.</p>
    </section>
  </main>

  <footer>
    <span>Hecho para pruebas rÃ¡pidas âœ¨</span>
    <span>Build: <span id="build">static-html</span></span>
  </footer>
</div>

<script>
const $ = id => document.getElementById(id);
$("host").textContent = location.host || "file://";
$("domain").textContent = location.hostname || "local";
$("protocol").textContent = location.protocol;

// Reloj
function updateClock(){ $("clock").textContent = new Intl.DateTimeFormat('es-MX',{dateStyle:'full',timeStyle:'medium'}).format(new Date()); }
updateClock();
setInterval(updateClock,1000);

// Tema oscuro persistente
const THEME_KEY = "pref-theme";
function applyTheme(theme){
  if(theme==="light"){
    document.documentElement.style.setProperty('--bg','#f6f7fb');
    document.documentElement.style.setProperty('--card','#ffffff');
    document.documentElement.style.setProperty('--fg','#0b1225');
    document.documentElement.style.setProperty('--muted','#4b5563');
  }else{
    document.documentElement.style.setProperty('--bg','#0b1020');
    document.documentElement.style.setProperty('--card','#111936');
    document.documentElement.style.setProperty('--fg','#e6e9f2');
    document.documentElement.style.setProperty('--muted','#9aa3b2');
  }
}
applyTheme(localStorage.getItem(THEME_KEY) || "dark");

$("toggleTheme").addEventListener("click",()=>{ 
  const next=(localStorage.getItem(THEME_KEY)||"dark")==="dark"?"light":"dark";
  localStorage.setItem(THEME_KEY,next); applyTheme(next);
});

// Contador persistente
const COUNT_KEY="demo-count";
function renderCount(){ $("count").textContent=localStorage.getItem(COUNT_KEY)||"0"; }
renderCount();
$("countBtn").addEventListener("click",()=>{ let c=parseInt(localStorage.getItem(COUNT_KEY)||"0",10); localStorage.setItem(COUNT_KEY,String(++c)); renderCount(); });
$("reset").addEventListener("click",()=>{ localStorage.setItem(COUNT_KEY,"0"); renderCount(); localStorage.setItem(THEME_KEY,"dark"); applyTheme("dark"); });
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAcwEb6uhdOjneQ_xjxJsvr7sX-z-SQ3wU",
  authDomain: "padel-score-95999.firebaseapp.com",
  projectId: "padel-score-95999",
  storageBucket: "padel-score-95999.firebasestorage.app",
  messagingSenderId: "1051967038944",
  appId: "1:1051967038944:web:5b29f5014e5954b8217785",
  measurementId: "G-B9C6T62P9H"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const loginScreen = $("loginScreen");
const mainContent = $("mainContent");
const loginBtn = $("googleLoginBtn");
const logoutBtn = $("logoutBtn");
const adminSection = $("adminSection");

loginBtn.onclick = async ()=>{ try{ await signInWithPopup(auth,provider); }catch(err){ alert("Error: "+err.message); } };
logoutBtn.onclick = async ()=>{ await signOut(auth); };

onAuthStateChanged(auth, async user=>{
  if(user){
    // Mostrar todo
    loginScreen.style.display="none";
    mainContent.style.display="grid";

    // Revisar custom claims
    const tokenResult = await user.getIdTokenResult();
    if(tokenResult.claims.admin){
      adminSection.style.display="block";
    }else{
      adminSection.style.display="none";
    }
  }else{
    loginScreen.style.display="flex";
    mainContent.style.display="none";
  }
});
</script>
</body>
</html>
